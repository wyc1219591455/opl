<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.zhengjie.modules.opl.mapper.SubServiceCatalogMapper">

    <insert id="insertSubCatalog" parameterType="me.zhengjie.modules.opl.domain.SubServiceCatalog">
        INSERT INTO serviceCatalog(catalogName,description,parentId,status,defaultQueueId,createDateTime,createUserId,modifyDateTime,modifyUserId)
        VALUES(#{catalogName},#{description},#{parentId},#{status},#{defaultQueueId},#{createDateTime},#{createUserId},#{modifyDateTime},#{modifyUserId})
    </insert>

    <select id="findSubCatalogByParentId"  resultType="me.zhengjie.modules.opl.service.dto.SubServiceCatalogDto">
        SELECT A.catalogId,A.catalogName,A.description,A.parentId,A.status,A.defaultQueueId,D.name as defaultQueue ,A.createUserId,A.createDateTime,B.FHumanName as createPerson ,A.modifyDateTime,A.modifyUserId,C.FHumanName as modifyPerson
        FROM subServiceCatalog A
        LEFT JOIN tsysuser B ON A.createUserId=B.FUserName
        LEFT JOIN tsysuser C ON A.modifyUserId=C.FUserName
        LEFT JOIN trequestqueues D ON A.defaultQueueId=D.id

        Where A.parentId= #{ParentId}


        ORDER BY A.createDateTime DESC

    </select>
</mapper>
